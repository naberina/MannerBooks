---
title: "🔰 関数"
---

## はじめに
コーディングをしていると、別々の処理の中で同様の処理を実行したい場面がよくあります。
しかし、同じ内容を何度も記述するのは、コードの量を増やすだけではなく、処理の内容を変更したい時に複数箇所を変更しないといけないため非効率的です。ここでは、同じ処理をするコードをまとめて再利用しやすくする「**関数化**」を理解していきましょう。

## 関数とは？
関数(`function`)は、一連の処理を一つにまとめたものです。
先に関数を定義しておくことで、毎回同じコードを書く代わりに、この関数を呼び出して処理を実行することができます。処理の更新をしたい場合も、関数を修正するだけです。画期的ですね！
では、実際にJavaScriptでの関数の作り方を確認していきましょう。

## 関数宣言で関数を定義
JavaScriptの一番スタンダードな関数宣言は、次のように記述します。

```javascript:関数宣言
function 関数名(パラメータ){
  // 処理内容
  return 最終的に返す値;
}
```

では、関数宣言の要素を確認してみましょう。
関数宣言は、3つの要素から成り立っています。

1. 関数宣言
2. パラメータ
3. 戻り値（return）

#### 1. 関数宣言
関数宣言も、変数宣言(`let`, `const`, `var`)と同様に「ここから関数を定義します」の意味を持つ `function` に続けて関数を定義します。関数名は、処理内容が分かりやすい名前をつけましょう。

#### 2.パラメータ
パラメータとは、関数に渡す値として定義する値のことです。
パラメータは、「, (カンマ)」で複数設定したり、省略することが可能です。

#### 3. 戻り値（return）
処理内容は、それぞれの関数によって変わってきますが、関数が最終的に返す値のことを「戻り値」と呼びます。文頭に `return` を書くことで戻り値を明記します。

### 関数の呼び出し方
パラメータなしの場合は、 `関数名();`
パラメータがある場合は、 `関数名(引数);` で関数を呼び出すことができます。

:::message
##### 「引数」と「パラメータ」の違いとは？
- **引数（ひきすう）**：関数に実際に渡す値
- **パラメータ**：関数宣言で、関数に渡す値として定義する値
:::

#### 引数なしの場合
引数が不要な関数は、以下のように呼び出します。

```js:関数宣言(例：引数なし)
// 関数定義
function showMessage(){
  console.log('こんにちは！');
}

// 関数を呼び出す
showMessage();
//-> こんにちは！
```

#### 引数ありの場合
引数がある関数では、以下のように呼び出します。

```js:関数宣言(例：引数あり)
// 関数定義
function showMessage(text){
  console.log(text);
}

// 関数を呼び出す
showMessage('Hello');
//-> Hello

showMessage('おはようございます！');
//-> おはようございます！
```

引数を使用すると、関数の処理部分に値を渡すことができるため、
条件分岐を用いて、引数によって異なる戻り値を返すこともできます。

```js:サンプル関数(引数)
// 関数定義
function checkAge(age) {
  if (age >= 20) {
    return true;
  } else {
    return false;
  }
}

// 関数を呼び出す
checkAge(20);
// -> true
checkAge(19);
// -> false
```

しかし、関数宣言では関数を宣言する前に、関数を呼び出しても実行されてしまいます。

```js:関数宣言(例：引数あり)
// 関数宣言より前に関数を呼び出すコードを書いても実行される
showMessage('Hello');
//-> Hello

// 関数定義
function showMessage(text){
  console.log(text);
}
```

関数宣言の前に関数を呼び出しても実行できる理由は、「[関数宣言の巻き上げ](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/function#function_declaration_hoisting)」が起きるためです。
関数宣言と呼び出しの順序を気にせず実行できてしまうことで、コードが複雑になる可能性が高くなります。
そこで、関数宣言後に関数を呼び出すことができる**関数式**を使用して、関数を定義していきましょう。

参考：[Hoisting (巻き上げ、ホイスティング)](https://developer.mozilla.org/ja/docs/Glossary/Hoisting)

## 関数式で関数を定義

関数式は、関数自体を変数で定義した式です。具体例を確認してみましょう！

```javascript
// 関数式でincrement関数を定義する
const increment = function(n) {
  return n + 1;
}

// 呼び出す
console.log(increment(10));
// -> 11
```

このように、関数式は変数に関数を代入しています。
しかし、よく見ると先ほどの関数宣言とは異なり、functionの後の関数名が省略されています。これは無名関数と呼ばれるものです。

:::message
##### 無名関数とは？
関数名を省略して関数を定義したものを無名関数と呼びます。
```javascript
// 引数なし
function() {
  return 'Hello';
}

// 引数あり
function(name) {
  return `Hello, ${name}`;
}
```
:::

関数式は、関数名ではなく変数名で呼び出すことができます。
また、関数式は代入処理のタイミングで関数が定義されるため、巻き上げ処理が起こりません。そのため、関数宣言後に関数を呼び出すことができるため、コーディングの順に沿った動作になります。特別な理由がない場合は、関数式で関数を定義する方が好ましいです。

## アロー関数で関数を定義
関数式をさらに発展して、見やすく・書きやすくなったのがアロー関数です。

#### 特徴
- `=>` が矢に見えるためアロー関数と呼ばれる
- `function` の代わりに `=>` を使用する
- アロー関数は関数をシンプルに記述する

```javascript
// 引数なしの関数宣言
const greeting = () => {
  return 'Hello, world';
}
console.log(greeting());
// -> Hello, world

// 引数ありの関数宣言
const increment = (n) => {
  return n + 1;
}
console.log(increment(10));
// -> 11
```

また、アロー関数は以下に該当すると、さらに省略することが可能です。

- 引数が1つの場合、引数の`()`を省略可能
- 処理が1行でreturnできる場合、return省略可能

```javascript
const increment = n => n + 1;
console.log(increment(10));
// -> 11
```

非常にすっきり記述することができました！

## まとめ
何度も同様の処理を書きたい場合は、関数化を検討しましょう。また、関数は複数の宣言方法があり、巻き上げが発生する関数定義や、巻き上げの発生しない関数式があります。特別な理由がない場合は、関数式かつアロー関数でシンプルに記載するのがおすすめです。

## チェックポイント
- [x] 関数宣言の方法がわかった
- [x] 関数が宣言できる
- [x] 関数宣言・関数式・アロー関数の書き方・特徴がわかった
